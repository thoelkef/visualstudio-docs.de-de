---
title: 'CA2147: Transparente Methoden dürfen keine Sicherheitsassertionen verwenden.'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- SecurityTransparentCodeShouldNotAssert
- CA2147
- CA2128
helpviewer_keywords:
- CA2128
- SecurityTransparentCodeShouldNotAssert
ms.assetid: 5d31e940-e599-4b23-9b28-1c336f8d910e
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 384fd04d1c822f3ce0768cbff409c1ddc2579898
ms.sourcegitcommit: b885f26e015d03eafe7c885040644a52bb071fae
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/30/2020
ms.locfileid: "85525046"
---
# <a name="ca2147-transparent-methods-may-not-use-security-asserts"></a>CA2147: Transparente Methoden dürfen keine Sicherheitsassertionen verwenden.

|Element|Wert|
|-|-|
|CheckId|CA2147|
|Category|Microsoft.Security|
|Unterbrechende Änderung|Breaking|

## <a name="cause"></a>Ursache
Code, der als markiert ist, verfügt <xref:System.Security.SecurityTransparentAttribute> nicht über ausreichende Berechtigungen für Assert.

> [!NOTE]
> Diese Legacy Regel ist nicht in FxCop-Analyzern verfügbar. Weitere Informationen finden Sie unter [Veraltete Regeln](fxcop-rule-port-status.md#deprecated-rules).

## <a name="rule-description"></a>Regelbeschreibung
Mit dieser Regel werden alle Methoden und Typen in einer Assembly analysiert, die entweder 100% transparent oder gemischt transparent/kritisch ist, und jede deklarative oder imperative Verwendung von Flags <xref:System.Security.CodeAccessPermission.Assert%2A> .

Zur Laufzeit bewirken alle Aufrufe <xref:System.Security.CodeAccessPermission.Assert%2A> von aus transparentem Code, dass eine ausgelöst wird <xref:System.InvalidOperationException> . Dies kann sowohl in 100% transparenten Assemblys als auch in gemischten transparenten/kritischen Assemblys auftreten, in denen eine Methode oder ein Typ als transparent deklariert ist, aber eine deklarative oder imperative Bestätigung enthält.

Der .NET Framework 2,0 hat eine Funktion mit dem Namen " *Transparenz*" eingeführt. Einzelne Methoden, Felder, Schnittstellen, Klassen und Typen können entweder transparent oder kritisch sein.

Transparenter Code ist nicht berechtigt, Sicherheits Privilegien zu erhöhen. Aus diesem Grund werden alle gewährten Berechtigungen automatisch an die Aufrufer-oder Host Anwendungsdomäne übermittelt. Beispiele für Erweiterungen sind Assert, LinkDemand, SuppressUnmanagedCode und `unsafe` Code.

## <a name="how-to-fix-violations"></a>Behandeln von Verstößen
Um das Problem zu beheben, markieren Sie entweder den Code, der den Assert aufruft <xref:System.Security.SecurityCriticalAttribute> , mit, oder entfernen Sie den Assert.

## <a name="when-to-suppress-warnings"></a>Wann sollten Warnungen unterdrückt werden?
Unterdrücken Sie keine Meldung von dieser Regel.

## <a name="example"></a>Beispiel
Dieser Code schlägt fehl `SecurityTestClass` , wenn transparent ist, wenn die `Assert` Methode einen auslöst <xref:System.InvalidOperationException> .

[!code-csharp[FxCop.Security.CA2147.TransparentMethodsMustNotUseSecurityAsserts#1](../code-quality/codesnippet/CSharp/ca2147-transparent-methods-may-not-use-security-asserts_1.cs)]

## <a name="example"></a>Beispiel
Eine Möglichkeit besteht darin, die SecurityTransparentMethod-Methode im folgenden Beispiel Code Review, und wenn die Methode für die Erhöhung als sicher eingestuft wird, markieren Sie SecurityTransparentMethod mit Secure-Critical. Dies erfordert, dass eine ausführliche, umfassende und fehlerfreie Sicherheitsüberprüfung für die Methode mit allen Aufrufen erfolgen muss, die innerhalb der Methode unter der Assert-Methode auftreten:

[!code-csharp[FxCop.Security.SecurityTransparentCode2#1](../code-quality/codesnippet/CSharp/ca2147-transparent-methods-may-not-use-security-asserts_2.cs)]

Eine andere Möglichkeit besteht darin, die Assert-Berechtigung aus dem Code zu entfernen und allen nachfolgenden Datei-e/a-Berechtigungen das übernehmen von SecurityTransparentMethod an den Aufrufer zu gestatten Dies ermöglicht Sicherheitsüberprüfungen. In diesem Fall ist keine Sicherheitsüberprüfung erforderlich, da die Berechtigungsanforderungen an den Aufrufer und/oder die Anwendungsdomäne weitergeleitet werden. Berechtigungsanforderungen werden durch die Sicherheitsrichtlinie, die Hostingumgebung und die Berechtigungen zum Gewähren von Code Quellen streng gesteuert.

## <a name="see-also"></a>Weitere Informationen
[Sicherheitswarnungen](../code-quality/security-warnings.md)
