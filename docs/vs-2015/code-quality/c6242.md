---
title: C6242 | Microsoft-Dokumentation
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-devops-test
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- C6242
helpviewer_keywords:
- C6242
ms.assetid: 523d46ce-8370-434c-a752-2e3a18cca9a5
caps.latest.revision: 20
author: mikeblome
ms.author: mblome
manager: ghogen
ms.openlocfilehash: 23188882147172c462d9ae3dbb1fbca6fd7ad5e3
ms.sourcegitcommit: af428c7ccd007e668ec0dd8697c88fc5d8bca1e2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/16/2018
ms.locfileid: "51795998"
---
# <a name="c6242"></a>C6242
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Warnung C6242: Ein Aussprung aus diesem Try-Block erzwingt eine lokale Entladung und hat schwere Leistungseinbußen zur Folge.  
  
 Diese Warnung gibt an, dass der geschützte Block einer try-finally-Anweisung nicht vollständig durchlaufen wurde, weil der Block vorher durch eine Sprunganweisung verlassen wurde.  
  
 Wenn der geschützte Block einer try-finally-Anweisung nicht vollständig bis zur letzten Anweisung durchlaufen wird, muss eine lokale Entladung erfolgen. Für die lokale Entladung sind normalerweise ca. 1.000 Maschinenanweisungen erforderlich, d. h., eine lokale Entladung wirkt sich leistungsmindernd aus.  
  
 Verwenden Sie `_leave`, um den geschützten Block einer try-finally-Anweisung zu verlassen.  
  
## <a name="example"></a>Beispiel  
 Der folgende Code generiert diese Warnung:  
  
```  
#include <malloc.h>  
void DoSomething(char *p); // function can throw exception  
  
int f( )  
{  
   char *ptr = 0;  
   __try   
   {  
      ptr = (char*) malloc(10);  
      if ( !ptr )   
      {  
         return 0;   //Warning: 6242  
      }  
      DoSomething( ptr );  
   }  
   __finally   
   {  
      free( ptr );  
   }  
   return 1;  
}  
```  
  
 Um die Warnung zu korrigieren, verwenden Sie `__leave`, wie im folgenden Code dargestellt:  
  
```  
#include <malloc.h>  
void DoSomething(char *p);   
int f()  
{  
   char *ptr = 0;  
   int retVal = 0;  
  
   __try   
   {  
      ptr = (char *) malloc(10);  
      if ( !ptr )  
      {  
         retVal = 0;  
         __leave;   //No warning  
      }  
      DoSomething( ptr );  
      retVal = 1;  
   }  
   __finally  
   {  
      free( ptr );  
   }  
  
   return retVal;  
}  
```  
  
 Die Verwendung von "malloc" und "free" kann viele Fehler im Sinne von Speicherverlusten und Ausnahmen verursachen. Um diese Arten von Speicherverlusten und Ausnahmen vollständig zu vermeiden, verwenden Sie die Mechanismen, die von der C++-Standardvorlagenbibliothek (STL) bereitgestellt werden. Dazu gehören ["shared_ptr"](http://msdn.microsoft.com/library/1469fc51-c658-43f1-886c-f4530dd84860), [Unique_ptr](http://msdn.microsoft.com/library/acdf046b-831e-4a4a-83aa-6d4ee467db9a), und [Vektor](http://msdn.microsoft.com/library/c1431ad8-c0b6-4dbb-89c4-5f651e432d7f). Weitere Informationen finden Sie unter [intelligente Zeiger](http://msdn.microsoft.com/library/909ef870-904c-49b6-b8cd-e9d0b7dc9435) und [C++-Standardbibliothek](http://msdn.microsoft.com/library/a37d3ba3-58af-47c7-9ee2-441ccd7b77ee).  
  
## <a name="see-also"></a>Siehe auch  
 [try-finally-Anweisung](http://msdn.microsoft.com/library/826e0347-ddfe-4f6e-a7bc-0398e0edc7c2)



